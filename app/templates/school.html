<!DOCTYPE html>
{% set race_order = ['american_indian_or_alaska_native', 'asian', 'hawaiian_or_pacific_islander', 'hispanic', 'black', 'white', 'two_or_more_races', 'total'] %}
{% set category_order = ['Teachers', 'Administrators', 'Aides / Paraprofessionals', 'Pupil Services', 'Other'] %}
{% set degree_map = dict([
    ('associate', "Associate Degree"),
    ('bachelors', "Bachelor's Degree"),
    ('masters', "Master's Degree"),
    ('six_year_specialists', "6-Year Specialist's Degree"),
    ('doctorate', "Doctorate"),
    ('other', "Other"),
]) %}
{% set degree_order = ('associate', 'bachelors', 'masters', 'six_year_specialists', 'doctorate', 'other') %}
{% set tenure_pairs = [
    ('1_2', "1-2 Years"),
    ('3_4', "3-4 Years"),
    ('5_plus', "5+ Years")
] %}
{% set tenure_order = ('1_2', '3_4', '5_plus') %}
{% set tenure_map = dict(tenure_pairs) %}
<html>
<style type="text/css">
td,
th {
    border: 1px solid rgb(190, 190, 190);
    padding: 10px;
}

td {
    text-align: center;
}

tr:nth-child(even) {
    background-color: #eee;
}

th[scope="col"] {
    background-color: #696969;
    color: #fff;
}

th[scope="row"] {
    background-color: #d7d9f2;
}

caption {
    padding: 10px;
    caption-side: top;
}

table {
    border-collapse: collapse;
    border: 2px solid rgb(200, 200, 200);
    letter-spacing: 1px;
    font-family: sans-serif;
    font-size: .8rem;
}
</style>
    <head>
        <title>{{school['longname']}}</title>
    </head>
    <body>
        <h1>{{school['longname']}}</h1>
        <table>
            <caption>Summary</caption>
            <tr>
                <th scope="row">Grades Included</th>
                <td>{{school['low_grade']}}-{{school['high_grade']}}</td>
            </tr>
            <tr>
                <th scope="row">Is Elementary School</th>
                <td>{{school['is_elementary']}}</td>
            </tr>
            <tr>
                <th scope="row">Is Middle School</th>
                <td>{{school['is_middle']}}</td>
            </tr>
            <tr>
                <th scope="row">Is High School</th>
                <td>{{school['is_high']}}</td>
            </tr>
        </table>

        <table>
            <caption>Staff per Category by Gender (2018-2019)</caption>
            <tr>
                <th scope="col">Category</th>
                <th scope="col">Gender</th>
                <th scope="col">Count</th>
            </tr>

            {% for category in category_order %}
            <tr>
                <td rowspan="2">{{category}}</td>
                <td>F</td>
                <td>{{staff_by_category_by_sex[category]['F']}}</td>
            </tr>
            <tr>
                <td>M</td>
                <td>{{staff_by_category_by_sex[category]['M']}}</td>
            </tr>
            {% endfor %}
        </table>

        <table>
            <caption>Staff per Category by Education Level (2018-2019)</caption>
            <tr>
                <th scope="col">Category</th>
                {% for degree in degree_order %}
                <th scope="col">{{degree_map[degree]}}</th>
                {% endfor %}
            </tr>

            {% for category in category_order if category in staff_by_category_by_education %}
            <tr>
                <td>{{category}}</td>
                {% for degree in degree_order %}
                <td>{{staff_by_category_by_education[category].get(degree, 0.0)}}</td>
                {% endfor %}
            </tr>

            {% endfor %}
        </table>

        <table>
            <caption>Staff per Category by Tenure at School (Until 2018-2019)</caption>
            <tr>
                <th scope="col">Category</th>
                {% for tenure in tenure_order %}
                <th scope="col">{{tenure_map[tenure]}}</th>
                {% endfor %}
            </tr>

            {% for category in category_order %}
            <tr>
                <td>{{category}}</td>
                {% for tenure in tenure_order %}
                <td>{{staff_by_category_by_tenure[category][tenure]}}</td>
                {% endfor %}
            </tr>
            {% endfor %}
        </table>

        <table>
            <caption>Discipline Actions by Sex (2015-2016)</caption>
            <tr>
                <th scope="col">Sex</th>
                <th scope="col">In-School Suspension</th>
                <th scope="col">Out-of-School Suspension</th>
                <th scope="col">Referral to Law Enforcement</th>
            </tr>

            <tr>
                <th scope="row">Female</th>
                <td>{{discipline_by_type_by_sex['iss']['F']}}</td>
                <td>{{discipline_by_type_by_sex['oss']['F']}}</td>
                <td>{{discipline_by_type_by_sex['referral']['F']}}</td>
            </tr>
            <tr>
                <th scope="row">Male</th>
                <td>{{discipline_by_type_by_sex['iss']['M']}}</td>
                <td>{{discipline_by_type_by_sex['oss']['M']}}</td>
                <td>{{discipline_by_type_by_sex['referral']['M']}}</td>
            </tr>
        </table>
        <table>
            <caption>Discipline Actions by Race (2015-2016)</caption>
            <tr>
                <th scope="col">Type of Action</th>
                <th scope="col">American Indian or Alaska Native</th>
                <th scope="col">Asian</th>
                <th scope="col">Hawaiian or Pacific Islander</th>
                <th scope="col">Hispanic</th>
                <th scope="col">Black</th>
                <th scope="col">White</th>
                <th scope="col">Two or More Races</th>
                <th scope="col">Total</th>
            </tr>

            <tr>
                <th scope="row">In-School Suspension</th>
                {% for race in race_order %}
                <td>{{discipline_by_type_by_race['iss'][race]}}</td>
                {% endfor %}
            </tr>
            <tr>
                <th scope="row">Out-of-School Suspension</th>
                {% for race in race_order %}
                <td>{{discipline_by_type_by_race['oss'][race]}}</td>
                {% endfor %}
            </tr>
            <tr>
                <th scope="row">Referral to Law Enforcement</th>
                {% for race in race_order %}
                <td>{{discipline_by_type_by_race['referral'][race]}}</td>
                {% endfor %}
            </tr>
        </table>

    </body>
</html>


